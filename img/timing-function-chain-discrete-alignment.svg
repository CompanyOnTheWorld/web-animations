<!-- vim: set expandtab ts=2 sw=2 tw=80: -->
<svg xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  width="100%" height="100%" viewBox="0 0 600 520">
  <defs>
    <style type="text/css">
    svg {
      font-size: 23px;
      font-family: sans-serif;
    }

    /*
     * Line work
     */
    .axis, .tickMark {
      stroke: black;
      stroke-width: 1.5;
      fill: none;
      stroke-linecap: square;
    }
    .boundaryLine {
      stroke: grey;
      stroke-width: 1.5;
      stroke-dasharray: 3 4;
      fill: none;
    }
    .curve {
      fill: none;
      stroke: currentColor;
      stroke-width: 8;
      stroke-linecap: round;
    }
    .dotted {
      fill: none;
      stroke-width: 6;
      stroke-linecap: round;
      stroke-dasharray: 6 18;
    }
    .curveBox {
      stroke: blue;
      stroke-width: 1;
      stroke-dasharray: 3 4;
      fill: none;
    }
    .closedEndPoint {
      fill: currentColor;
      stroke: none;
    }
    .openEndPoint {
      fill: none;
      stroke: currentColor;
      stroke-width: 4.5;
    }

    /*
     * Background
     */
    .graphBackground {
      stroke: none;
      fill: #eee;
    }
    .curveBoxBackground {
      stroke: none;
      fill: white;
    }

    /*
     * Text labels
     */
    .axisLabel {
      text-anchor: middle;
    }
    .axisValue {
      fill: grey;
    }
    .axisValue.vert {
      text-anchor: end;
    }
    .axisValue.horz {
      text-anchor: middle;
    }
    .curveBoxLabel {
      fill: blue;
      font-size: 0.8em;
    }
    .keyframeValue {
      text-anchor: middle;
      font-weight: bold;
    }
    #rightArrow {
      stroke-width: 5;
      stroke-linecap: round;
    }
    </style>
    <path id="rightArrow"
      d="M-45 0h35m0 0l-10-10m10 10l-10 10" fill="none" stroke="currentColor"/>
  </defs>
  <g transform="translate(120 420)">
    <!-- Backing -->
    <rect y="-400" width="400" height="400" class="graphBackground"/>
    <rect y="-300" width="300" height="300" class="curveBoxBackground"/>
    <rect x="300" y="-400" width="100" height="100" class="curveBoxBackground"/>
    <!-- Bounds -->
    <line x1="400" x2="400" y2="-400" class="boundaryLine"/>
    <line y1="-400" x2="400" y2="-400" class="boundaryLine"/>
    <!-- Y axis -->
    <line y2="-400" class="axis"/>
    <line y1="-200" x2="-20" y2="-200" class="tickMark"/>
    <line y1="-400" x2="-20" y2="-400" class="tickMark"/>
    <text x="-30" y="-200" dy="0.3em" class="axisValue vert">0.5</text>
    <!-- X axis -->
    <line x2="400"  class="axis"/>
    <line x1="200"  x2="200" y2="20" class="tickMark"/>
    <line x1="400"  x2="400" y2="20" class="tickMark"/>
    <text x="200" y="20" dy="1.1em" class="axisValue horz">0.5</text>
    <text x="400" y="20" dy="1.1em" class="axisValue horz">1</text>
    <!-- Origin -->
    <text y="30" class="axisValue">0</text>
    <!-- Keyframe values -->
    <text x="-80" fill="red" class="keyframeValue">red<tspan x="-80"
      dy="1.1em">(0%)</tspan></text>
    <use xlink:href="#rightArrow" color="red"/>
    <text x="-80" y="-300" fill="#33f" class="keyframeValue">blue<tspan
      x="-80" dy="1.1em">(75%)</tspan></text>
    <use xlink:href="#rightArrow" y="-300" color="#33f"/>
    <text x="-80" y="-400" fill="#0a0" class="keyframeValue">green<tspan
      x="-80" dy="1.1em">(100%)</tspan></text>
    <use xlink:href="#rightArrow" y="-400" color="#0a0"/>
    <!-- Knockout for open ends -->
    <defs>
      <linearGradient gradientUnits="userSpaceOnUse"
        x1="-10" x2="480" id="fadeOut">
        <stop offset="0" stop-color="white"/>
        <stop offset="0.875" stop-color="white"/>
        <stop offset="0.96" stop-color="#1a1a1a"/>
        <stop offset="1" stop-color="black"/>
      </linearGradient>
      <mask id="lineworkMask" maskUnits="userSpaceOnUse"
        x="-10" y="-410" width="480" height="420">
        <rect x="-10" y="-410" width="480" height="420" fill="url(#fadeOut)"/>
        <!-- Open end points -->
        <circle cx="300" r="10" fill="black"/>
        <circle cx="400" cy="-300" r="10" fill="black"/>
        <!-- Fade out -->
      </mask>
      <linearGradient gradientUnits="userSpaceOnUse"
        x1="0" x2="0" y1="0" y2="-400" id="colorGrad">
        <stop offset="0" stop-color="red"/>
        <stop offset="0.75" stop-color="#33f"/>
        <stop offset="1" stop-color="#0a0"/>
      </linearGradient>
    </defs>
    <!-- First box -->
    <path d="M0-300h300v300" class="curveBox"/>
    <text x="10" y="-280" class="curveBoxLabel">step-end</text>
    <path d="M0 0h300" class="curve" color="red" mask="url(#lineworkMask)"/>
    <circle r="10" class="closedEndPoint" color="red"/>
    <circle cx="300" r="10" class="openEndPoint" color="red"/>
    <path d="M300 0v-300" class="dotted" stroke="url(#colorGrad)"
      mask="url(#lineworkMask)"/>
    <!-- Second box -->
    <rect x="300" y="-400" width="100" height="100" class="curveBox"/>
    <text x="310" y="-380" class="curveBoxLabel">step-end</text>
    <path d="M300-300h100" class="curve" color="#33f"
      mask="url(#lineworkMask)"/>
    <circle cx="300" cy="-300" r="10" class="closedEndPoint" color="#33f"/>
    <circle cx="400" cy="-300" r="10" class="openEndPoint" color="#33f"/>
    <path d="M400-300v-100" class="dotted" stroke="url(#colorGrad)"
      mask="url(#lineworkMask)"/>
    <!-- Trailing value -->
    <path d="M400-400h100" class="curve" color="green"
      mask="url(#lineworkMask)"/>
    <circle cx="400" cy="-400" r="10" class="closedEndPoint" color="green"/>
    <!-- Label -->
    <text x="200" y="90" class="axisLabel">&#8220;step-end&#8221; with
      keyframe alignment and forwards fill</text>
  </g>
</svg>
